<template name="Jobs_showPage">
  {{#if Template.subscriptionsReady}}
    {{#with job}}
      <div class="job">
        {{#if job}}
          <div class="row job-header">
            <div class="col-md-1 col-sm-1 job-number">{{job.number}}</div>
            <div class="icon-container print-icon" data-toggle="modal" data-target="#printDialog">
              <span class="glyphicon glyphicon-print"></span>
            </div>
          </div>
          <div class="parties">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="party-label">SHIPPER</label>
                  {{> ElasticTextarea field="shipper" jobId=job._id value=job.shipper}}
                  {{> ElasticTextarea rows=4 field="shipperAddress" jobId=job._id value=job.shipperAddress}}
                </div>
                <div class="form-group">
                  <label class="party-label">CONSIGNEE</label>
                  {{> ElasticTextarea field="consignee" jobId=job._id value=job.consignee}}
                  {{> ElasticTextarea rows=4 field="consigneeAddress" jobId=job._id value=job.consigneeAddress}}
                </div>
                <div class="form-group">
                  <label class="party-label">NOTIFY PARTY</label>
                  {{> ElasticTextarea field="notifyParty" jobId=job._id value=job.notifyParty}}
                  {{> ElasticTextarea rows=4 field="notifyPartyAddress" jobId=job._id value=job.notifyPartyAddress}}
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label>CUSTOMER REFERENCE</label>
                  {{> ElasticTextarea field="customerReference" jobId=job._id value=job.customerReference}}
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label>BILL OF LADING NUMBER</label>
                  {{> ElasticTextarea field="billOfLadingNumber" jobId=job._id value=job.billOfLadingNumber}}
                </div>
              </div>
            </div>
          </div>
          <div class="row job-movement text-center">
            <div class="col-md-3 col-sm-3">
              <div class="movement-checkpoint">
                <p><span class="glyphicon glyphicon-unchecked movement-icon"></span></p>
                {{> ElasticTextarea field="origin" jobId=job._id value=job.origin}}
              </div>
            </div>
            <div class="col-md-3 col-sm-3">
              <div class="movement-checkpoint">
                <p><span class="glyphicon glyphicon-unchecked movement-icon"></span></p>
                {{> ElasticTextarea field="portOfLoading" jobId=job._id value=job.portOfLoading}}
              </div>
            </div>
            <div class="col-md-3 col-sm-3">
              <div class="movement-checkpoint">
                <p><span class="glyphicon glyphicon-unchecked movement-icon"></span></p>
                {{> ElasticTextarea field="portOfDischarge" jobId=job._id value=job.portOfDischarge}}
              </div>
            </div>
            <div class="col-md-3 col-sm-3">
              <div class="movement-checkpoint">
                <p><span class="glyphicon glyphicon-unchecked movement-icon"></span></p>
                {{> ElasticTextarea field="destination" jobId=job._id value=job.destination}}
              </div>
            </div>
          </div>
          <div class="row job-cargo">
            <div class="col-md-12 col-sm-12">
              {{#each container in job.cargo.containers}}
                {{>CargoContainer path=(containerPath @index) container=container job=job containerIndex=@index}}
              {{/each}}
              <div class="cargo-container">
                <div class="row container-header">
                  <div class="icon-container add-container-button">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{else}}
          Access denied.
        {{/if}}
      </div>
    {{/with}}
  {{else}}
  {{/if}}
  <!-- Modal -->
  <div class="modal fade" id="printDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
            aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">Bill of Lading</h4>
        </div>
        <div class="modal-body">
          <embed class="print-preview" src="">
        </div>
      </div>
    </div>
  </div>
</template>